{"version":3,"sources":["webpack:///./../js/app/share.js"],"names":["Loading","require","MsgBox","weixin","shareID","query","shareObj","title","desc","link","serverPath","imgUrl","init","done","share","submitScore","score","combo","show","$","getJSON","id","data","hide","console","log","success","text","result","per","nickname","isOnline","addClass","window","location","href","name","search","match","RegExp","decodeURIComponent","$1"],"mappings":";;;;;;;;;;;;;;;AAAA,KAAIA,UAAU,mBAAAC,CAAQ,CAAR,CAAd;AACA,KAAIC,SAAS,mBAAAD,CAAQ,CAAR,CAAb;AACA,KAAIE,SAAS,mBAAAF,CAAQ,CAAR,CAAb;;AAEA,KAAIG,UAAUC,MAAM,IAAN,CAAd;;AAEA,KAAIC,WAAW;AACXC,YAAO,iBADI,EACe;AAC1BC,WAAM,+BAFK;AAGXC,WAAMC,aAAa,wBAAb,GAAwCN,OAHnC;AAIXO,aAAQD,aAAa;AAJV,EAAf;;AAOAP,QAAOS,IAAP,GAAcC,IAAd,CAAmB,YAAM;AACrBV,YAAOW,KAAP,CAAaR,QAAb,EAAuBA,QAAvB;AACH,EAFD;;AAIAS;;AAEA,UAASA,WAAT,CAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AAC/BjB,aAAQkB,IAAR;AACAC,OAAEC,OAAF,CAAUV,aAAa,mCAAvB,EAA4D;AACxDW,aAAIjB;AADoD,MAA5D,EAEGS,IAFH,CAEQ,UAACS,IAAD,EAAU;AACdtB,iBAAQuB,IAAR;AACAC,iBAAQC,GAAR,CAAYH,IAAZ;AACA,aAAGA,KAAKI,OAAR,EAAiB;AACbP,eAAE,sBAAF,EAA0BQ,IAA1B,CAA+BL,KAAKM,MAAL,CAAYZ,KAA3C;AACAG,eAAE,wBAAF,EAA4BQ,IAA5B,CAAiCL,KAAKM,MAAL,CAAYC,GAA7C;AACAV,eAAE,qBAAF,EAAyBQ,IAAzB,CAA8BL,KAAKM,MAAL,CAAYE,QAA1C;AACA,iBAAGR,KAAKM,MAAL,CAAYG,QAAZ,IAAwB,GAA3B,EAAgC;AAC/BZ,mBAAE,cAAF,EAAkBa,QAAlB,CAA2B,KAA3B;AACA;AACJ,UAPD,MAOO;AACHC,oBAAOC,QAAP,CAAgBC,IAAhB,GAAuBzB,aAAa,eAApC;AACH;AACJ,MAfD;AAgBH;;AAED,UAASL,KAAT,CAAe+B,IAAf,EAAqB;AACjB,YAAOF,SAASG,MAAT,CAAgBC,KAAhB,CAAsB,IAAIC,MAAJ,CAAW,cAAcH,IAAd,GAAqB,eAAhC,EAAiD,GAAjD,CAAtB,IAA+EI,mBAAmBD,OAAOE,EAA1B,CAA/E,GAA+G,EAAtH;AACH,E","file":"js/share.js","sourcesContent":["var Loading = require(\"../components/loading.js\");\r\nvar MsgBox = require(\"../components/msgbox.js\");\r\nvar weixin = require(\"../libs/weixin.js\");\r\n\r\nlet shareID = query('id');\r\n\r\nlet shareObj = {\r\n    title: \"为乐高英雄助力，送丰厚大奖啦！\", // 分享标题\r\n    desc: '每天助力乐高英雄，天天赠送“乐高颗粒”，月末还能抽大奖哦～',\r\n    link: serverPath + \"lego20170726/share?id=\" + shareID,\r\n    imgUrl: serverPath + \"html/compaign/lego20170726/images/share.jpg\",\r\n};\r\n\r\nweixin.init().done(() => {\r\n    weixin.share(shareObj, shareObj);\r\n});\r\n\r\nsubmitScore();\r\n\r\nfunction submitScore(score, combo) {\r\n    Loading.show();\r\n    $.getJSON(serverPath + 'lego20170726/api/score?callback=?', {\r\n        id: shareID\r\n    }).done((data) => {\r\n        Loading.hide();\r\n        console.log(data);\r\n        if(data.success) {\r\n            $(\"#share .text .blocks\").text(data.result.score);\r\n            $(\"#share .text .percent \").text(data.result.per);\r\n            $(\"#share .text .name \").text(data.result.nickname);\r\n            if(data.result.isOnline != '1') {\r\n            \t$(\"#share .text\").addClass('off');\r\n            }\r\n        } else {\r\n            window.location.href = serverPath + 'lego20170726/';\r\n        }\r\n    });\r\n}\r\n\r\nfunction query(name) {\r\n    return location.search.match(new RegExp('(?:\\\\?|&)' + name + '=(.*?)(?:$|&)', 'i')) ? decodeURIComponent(RegExp.$1) : '';\r\n}\n\n\n// WEBPACK FOOTER //\n// ./../js/app/share.js"],"sourceRoot":""}