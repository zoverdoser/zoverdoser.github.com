webpackJsonp([3],{0:function(t,e,s){t.exports=s(67)},67:function(t,e,s){(function(t){"use strict";function e(){p.show(),t.getJSON(serverPath+"lego20170726/api/prize-list?callback=?").done(function(e){if(p.hide(),console.log(e),e.success)for(var s=e.result.list,o=t(".prizeList li"),i=0;i<s.length;i++){var n=s[i].luckydraw_gift_id,a=s[i].win_code;o.filter('[data-id="'+n+'"]').addClass("on").data("code",a),"298"==n||"302"==n?(s[i].info&&o.filter('[data-id="'+n+'"]').addClass("get"),s[i].virtual_gift_code_shop&&o.filter('[data-id="'+n+'"]').addClass("got")):s[i].info&&o.filter('[data-id="'+n+'"]').addClass("got")}else r.alert(e.msg)})}function o(){t(".pop .close, .pop .closeBtn").on("click",function(){t(this).parent().parent().hide()}),t(".siteBtn, .pop.submitShop .submitShopPop .close, .pop.submitExpress .submitExpressPop .close, .pop.blocks .close, .pop.finish .close").on("click",function(){window.location.href=serverPath+"brands/lego"}),t(".pop.express .expressPop .submitBtn").on("click",i),t(".pop.shop .shopPop .submitBtn").on("click",n),t(".prizeList li .btn").on("click",function(){var e=String(t(this).parent().data("id"));!t(this).parent().hasClass("got")&&t(this).parent().hasClass("on")&&(~e.indexOf("277")?window.location.href="http://r.intonead.com/card/coupons":(l=t(this).parent().data("code"),~e.indexOf("298")||~e.indexOf("302")?t(this).parent().hasClass("get")?window.location.href=serverPath+"lego20170726/exchange":t(".pop").hide().siblings(".pop.shop").fadeIn():t(this).parent().hasClass("got")||t(".pop").hide().siblings(".pop.express").fadeIn()))}),a()}function i(){var e=t("#nameExpressIpt").val().trim(),s=t("#mobileExpressIpt").val().trim(),o=t("#addressExpressIpt").val().trim();return e&&o&&/^(13|14|15|18|17)\d{9}$/.test(s)?(p.show(),void t.getJSON(serverPath+"lego20170726/api/info?callback=?",{name:e,mobile:s,address:o,winCode:l}).always(function(){p.hide()}).fail(function(){r.alert("网络错误 请重试")}).done(function(e){console.log(e),e.success?t(".pop").hide().siblings(".pop.submitExpress").fadeIn():r.alert(e.msg)})):void r.alert("请填写正确的领奖信息")}function n(){var e=t("#nameShopIpt").val().trim(),s=t("#mobileShopIpt").val().trim(),o=t("#shopIpt option:selected").val();return e&&o&&"请选择门店"!=o&&/^(13|14|15|18|17)\d{9}$/.test(s)?(p.show(),void t.getJSON(serverPath+"lego20170726/api/info?callback=?",{name:e,mobile:s,address:o,winCode:l}).always(function(){p.hide()}).fail(function(){r.alert("网络错误 请重试")}).done(function(e){console.log(e),e.success?t(".pop").hide().siblings(".pop.submitShop").fadeIn():r.alert(e.msg)})):void r.alert("请填写正确的领奖信息")}function a(){var e=[],s=t("#cityIpt"),o="<option disabled selected>请选择城市</option>",i=t("#shopIpt"),n="<option disabled selected>请选择门店</option>";t.getJSON(serverPath+"shop/city?callback=?").done(function(t){for(var a=0;a<t.result.list.length;a++)e.push(t.result.list),o+='<option value="'+t.result.list[a].city+'">'+t.result.list[a].city+"</option>";s.append(o),i.html(n)}),s.on("change",function(){p.show();var e=s.find("option:selected").text();t.getJSON(serverPath+"shop/list?callback=?",{city:e}).done(function(t){p.hide(),n="<option disabled selected>请选择门店</option>";for(var e=0;e<t.result.list.length;e++)n+='<option value="'+t.result.list[e].name+","+t.result.list[e].shop_id+","+t.result.list[e].address+'">'+t.result.list[e].name+"</option>";i.html(n)})})}var l,p=s(3),r=s(4),c=s(5),d={title:"为乐高英雄助力，送丰厚大奖啦！",desc:"每天助力乐高英雄，天天赠送“乐高颗粒”，月末还能抽大奖哦～",link:serverPath+"lego20170726",imgUrl:serverPath+"html/compaign/lego20170726/images/share.jpg"};c.init().done(function(){c.share(d,d)}),e(),o()}).call(e,s(2))}});